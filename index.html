<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ç¾å ´Pro è¨­å‚™ãã‚“</title>
  
  <!-- PWAè¨­å®š -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#3b82f6">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="è¨­å‚™ãã‚“">
  
  <!-- ãƒ—ãƒ«ãƒˆã‚¥ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ– -->
  <style>
    html, body {
      overscroll-behavior-y: contain;
    }
  </style>
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <!-- v0.95: Tesseract.js OCRå‰Šé™¤ï¼ˆAIè§£æã«ä¸€æœ¬åŒ–ï¼‰ -->
  
  <!-- jsPDF for PDFå‡ºåŠ› -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <!-- xlsx-js-style for ã‚¹ã‚¿ã‚¤ãƒ«ä»˜ãExcelå‡ºåŠ›ï¼ˆSheetJS + ã‚»ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«æ‹¡å¼µï¼‰v0.95 -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx-js-style@1.2.0/dist/xlsx.bundle.js"></script>
  
  <!-- å¤–éƒ¨CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- â˜… COCOMI COREã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ1æ®µéšç›®ï¼‰â˜… -->
  <div id="cocomi-splash">
    <!-- éŠ€æ²³èƒŒæ™¯ç”»åƒï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ï¼‰ -->
    <div class="cocomi-galaxy">
      <img src="cocomi_galaxy.jpg" alt="">
    </div>

    <div class="cocomi-content">
      <div class="cocomi-title">COCOMI CORE</div>
      <div class="cocomi-philosophy" style="margin-top: -1em;">
        <span style="display:block; text-align:center; padding-right:3.5em;">æƒ³ã„ãŒæ§‹é€ ã«ãªã‚Š</span>
        <span style="display:block; text-align:center; padding-left:3.5em; margin-top:-0.5em;">æ§‹é€ ãŒè¨¼æ˜ã«ãªã‚‹ã€‚</span>
      </div>
      
      <!-- ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ -->
      <div class="cocomi-heartbeat">
        <svg viewBox="0 0 200 40">
          <polyline class="heartbeat-line" points="0,20 40,20 50,20 55,5 60,35 65,10 70,25 75,20 120,20 130,20 135,8 140,32 145,12 150,24 155,20 200,20"/>
        </svg>
      </div>
      
      <div class="cocomi-subtitle">COCOMI OS</div>
      <div class="cocomi-subtitle">Reflective Intelligence Architecture</div>
      <div class="cocomi-perafca">PERAFCA Core</div>
      <div class="cocomi-credit">
        <div style="font-size: 13px; letter-spacing: 0.1em;">Persona Architecture</div>
        <div style="font-size: 10px; opacity: 0.7; margin: 2px 0;">by.</div>
        <div style="font-size: 13px; letter-spacing: 0.05em;">
          aki & AI : ALL COCOMI Sisters
          <svg class="mini-heart" viewBox="0 0 24 24">
            <path d="M12,21 C12,21 4,14 4,9 C4,5.5 7,3 10,4.5 C11,5 12,6 12,6 C12,6 13,5 14,4.5 C17,3 20,5.5 20,9 C20,14 12,21 12,21 Z" />
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- â˜… PERAFCAã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ2æ®µéšç›®ï¼‰â˜… -->
  <div id="perafca-splash">
    <!-- éŠ€æ²³èƒŒæ™¯ç”»åƒï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ï¼‰ -->
    <div class="perafca-galaxy">
      <img src="perafca_galaxy.jpg" alt="">
    </div>

    <div class="perafca-content">
      <div class="perafca-title">PERAFCA Core</div>
      <div class="perafca-items" style="max-width: 75%; margin: 0 auto; text-align: left;">
        <div class="perafca-item"><span class="perafca-key">P.E.</span> â”€ Prompt Engineeringï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆï¼‰</div>
        <div class="perafca-item"><span class="perafca-key">R</span> â”€ Retrieval Augmentedï¼ˆæƒ…å ±æ´»ç”¨ï¼‰</div>
        <div class="perafca-item"><span class="perafca-key">A.F.</span> â”€ Agent Frameworkï¼ˆè‡ªå¾‹è¡Œå‹•å¾ªç’°ï¼‰</div>
        <div class="perafca-item"><span class="perafca-key">C.A.</span> â”€ Cognitive Architectureï¼ˆèªçŸ¥ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼‰</div>
      </div>
      <!-- â™¡ å¿ƒãŒç•°ç•Œã‚’ç´¡ãä»•çµ„ã¿ï¼ˆçŸ¢å°ã‚’ãƒãƒ¼ãƒˆã«ç½®ãæ›ãˆï¼‰ -->
      <div class="perafca-tagline">
        <svg class="tagline-heart" viewBox="0 0 24 24"><path d="M12,21 C12,21 4,14 4,9 C4,5.5 7,3 10,4.5 C11,5 12,6 12,6 C12,6 13,5 14,4.5 C17,3 20,5.5 20,9 C20,14 12,21 12,21 Z" /></svg>
        å¿ƒãŒç•°ç•Œã‚’ç´¡ãä»•çµ„ã¿
      </div>
    </div>
  </div>

  <!-- â˜… ã‚¢ãƒ—ãƒªã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ3æ®µéšç›®ï¼‰â˜… -->
  <div id="splash-screen">
    <div class="splash-icon">ğŸ—ï¸</div>
    <div class="splash-title">ç¾å ´Pro è¨­å‚™ãã‚“</div>
    <div class="splash-subtitle">COCOMI CORE</div>
    <div class="splash-subtitle" style="font-size: 12px; opacity: 0.8;">Powered by COCOMI OS</div>
    <div style="margin-top: 12px; padding: 6px 20px; background: rgba(255,255,255,0.2); border-radius: 20px; display: inline-block;">
      <span style="color: white; font-size: 14px; font-weight: bold;">Version 1.0</span>
    </div>
    <div class="splash-subtitle" style="font-size: 10px; opacity: 0.6; margin-top: 12px;">Since 2025</div>
    <div class="splash-loading"></div>
  </div>

  <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ç”»é¢ï¼ˆãƒ­ãƒƒã‚¯ç”»é¢ï¼‰ -->
  <div id="lock-screen" class="ocr-loading hidden" style="background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%); z-index: 9998;">
    <div style="background: white; border-radius: 20px; padding: 30px; width: 85%; max-width: 350px; text-align: center;">
      <div style="font-size: 50px; margin-bottom: 16px;">ğŸ”’</div>
      <h2 style="margin: 0 0 8px 0; font-size: 20px;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›</h2>
      <p style="font-size: 13px; color: #6b7280; margin-bottom: 20px;">ã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
      
      <input type="password" id="lockPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" 
        style="width: 100%; padding: 14px; font-size: 16px; border: 2px solid #e5e7eb; border-radius: 10px; text-align: center; margin-bottom: 16px;"
        onkeypress="if(event.key==='Enter')checkLockPassword()">
      
      <button onclick="checkLockPassword()" 
        style="width: 100%; padding: 14px; font-size: 16px; font-weight: bold; background: #3b82f6; color: white; border: none; border-radius: 10px; cursor: pointer;">
        ğŸ”“ ãƒ­ãƒƒã‚¯è§£é™¤
      </button>
      
      <p id="lockError" style="color: #ef4444; font-size: 13px; margin-top: 12px; display: none;">
        ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™
      </p>
      
      <p style="margin-top: 20px;">
        <a href="#" onclick="showRecoveryScreen(); return false;" style="color: #6b7280; font-size: 13px;">
          ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸå ´åˆ
        </a>
      </p>
    </div>
  </div>
  
  <!-- åˆè¨€è‘‰ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”»é¢ -->
  <div id="recovery-screen" class="ocr-loading hidden" style="background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%); z-index: 9999;">
    <div style="background: white; border-radius: 20px; padding: 30px; width: 85%; max-width: 350px; text-align: center;">
      <div style="font-size: 50px; margin-bottom: 16px;">ğŸ’¬</div>
      <h2 style="margin: 0 0 8px 0; font-size: 20px;">åˆè¨€è‘‰ã‚’å…¥åŠ›</h2>
      <p style="font-size: 13px; color: #6b7280; margin-bottom: 20px;">è¨­å®šã—ãŸåˆè¨€è‘‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
      
      <input type="text" id="recoveryInput" placeholder="åˆè¨€è‘‰" 
        style="width: 100%; padding: 14px; font-size: 16px; border: 2px solid #e5e7eb; border-radius: 10px; text-align: center; margin-bottom: 16px;"
        onkeypress="if(event.key==='Enter')checkRecoveryWord()">
      
      <button onclick="checkRecoveryWord()" 
        style="width: 100%; padding: 14px; font-size: 16px; font-weight: bold; background: #10b981; color: white; border: none; border-radius: 10px; cursor: pointer;">
        âœ… ç¢ºèª
      </button>
      
      <p id="recoveryError" style="color: #ef4444; font-size: 13px; margin-top: 12px; display: none;">
        åˆè¨€è‘‰ãŒé•ã„ã¾ã™
      </p>
      
      <p style="margin-top: 20px;">
        <a href="#" onclick="hideRecoveryScreen(); return false;" style="color: #6b7280; font-size: 13px;">
          â† æˆ»ã‚‹
        </a>
      </p>
    </div>
  </div>

  <!-- AIè§£æãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ï¼ˆv0.95: OCRã‹ã‚‰AIã«åç§°å¤‰æ›´ï¼‰ -->
  <div id="ocrLoading" class="ocr-loading hidden">
    <div class="ocr-spinner"></div>
    <div style="font-size: 18px; font-weight: bold;">AIè§£æä¸­...</div>
    <div class="ocr-progress" id="ocrProgress">æº–å‚™ä¸­...</div>
  </div>

  <!-- ========================================== -->
  <!-- å„ç”»é¢ã‚³ãƒ³ãƒ†ãƒŠï¼ˆå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ï¼‰ -->
  <!-- ========================================== -->
  <div id="screen-container">
    <!-- ç”»é¢ã¯screen-loader.jsã§å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
  </div>


  <!-- å¤–éƒ¨JavaScript -->
  <script src="products.js"></script>
  
  <!-- åˆ†æ•£åŒ–ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« -->
  <script src="idb-storage.js"></script><!-- v0.96: IndexedDBç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ -->
  <script src="globals.js"></script>
  <script src="storage.js"></script>
  <script src="settings.js"></script>
  <script src="customer.js"></script>
  <script src="tax.js"></script>
  <script src="master.js"></script>
  <script src="doc-template.js"></script>
  <script src="excel-template.js"></script>
  <script src="receipt-history.js"></script>
  <script src="receipt-list.js"></script>
  <script src="receipt-core.js"></script>
  <script src="receipt-ai.js"></script>
  <!-- v0.95: receipt-ocr.jså‰Šé™¤ï¼ˆAIè§£æã«ä¸€æœ¬åŒ–ï¼‰ -->
  <script src="estimate.js"></script>
  <script src="invoice.js"></script>
  <script src="expense.js"></script>
  <script src="voice.js"></script>
  <script src="price-search.js"></script><!-- v0.95è¿½åŠ : ä¾¡æ ¼æ¯”è¼ƒæ¤œç´¢æ©Ÿèƒ½ -->
  <script src="data.js"></script>
  <script src="help.js"></script><!-- v0.95è¿½åŠ : ãƒ˜ãƒ«ãƒ—ç”»é¢ã®ã‚¿ãƒ–åˆ‡æ›¿ãƒ»ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ -->
  <script src="genba.js"></script><!-- v1.0è¿½åŠ : ç¾å ´ç®¡ç† -->
  <script src="koutei.js"></script><!-- v1.0è¿½åŠ : å·¥ç¨‹ç®¡ç† -->
  <script src="shokunin.js"></script><!-- v2.0è¿½åŠ : è·äººç®¡ç† -->
  <script src="schedule-sync.js"></script><!-- v0.53è¿½åŠ : ãƒ‡ãƒ¼ã‚¿ä¸€å…ƒé€£æºï¼ˆschedule.jsã‚ˆã‚Šå‰ã«èª­è¾¼ï¼‰ -->
  <script src="schedule.js"></script><!-- v2.0è¿½åŠ : ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
  <script src="my-schedule.js"></script><!-- v0.53è¿½åŠ : ãƒã‚¤ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
  <script src="photo.js"></script><!-- v3.0è¿½åŠ : å†™çœŸç®¡ç† -->
  <script src="nippo.js"></script><!-- v3.0è¿½åŠ : æ—¥å ±ç®¡ç† -->
  <script src="talk-ai.js"></script><!-- v0.50è¿½åŠ : ãƒˆãƒ¼ã‚¯è§£æAI -->
  <script src="talk-analysis.js"></script><!-- v0.50è¿½åŠ : ãƒˆãƒ¼ã‚¯è§£æUI -->
  <script src="koutei-ai.js"></script><!-- v0.52è¿½åŠ : å·¥ç¨‹è¡¨AIèª­å– -->
  <script src="koutei-import.js"></script><!-- v0.52è¿½åŠ : å·¥ç¨‹è¡¨å–è¾¼UI -->
  <script src="madori-core.js"></script><!-- v4.0è¿½åŠ : é–“å–ã‚Šã‚¨ãƒ‡ã‚£ã‚¿(CanvasåŸºç›¤) -->
  <script src="madori-tools.js"></script><!-- v4.0è¿½åŠ : é–“å–ã‚Šã‚¨ãƒ‡ã‚£ã‚¿(æç”»ãƒ„ãƒ¼ãƒ«) -->
  <script src="madori-ui.js"></script><!-- v4.1è¿½åŠ : é–“å–ã‚Šã‚¨ãƒ‡ã‚£ã‚¿(UIãƒ»ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£) -->
  <script src="madori-data.js"></script><!-- v4.0è¿½åŠ : é–“å–ã‚Šã‚¨ãƒ‡ã‚£ã‚¿(ãƒ‡ãƒ¼ã‚¿ãƒ»é€£æº) -->
  <script src="photo-blackboard.js"></script><!-- v0.97è¿½åŠ : Phase6ç°¡æ˜“é»’æ¿ -->
  <script src="photo-manager.js"></script><!-- v0.97è¿½åŠ : Phase6å†™çœŸç®¡ç† -->
  <script src="daily-report.js"></script><!-- v11è¿½åŠ : Phase7æ—¥å ±ãƒ»å ±å‘Šæ›¸ -->
  <script src="report-pdf.js"></script><!-- v11è¿½åŠ : Phase7 PDFå‡ºåŠ› -->
  <script src="drawing-manager.js"></script><!-- v12è¿½åŠ : Phase8å›³é¢ç®¡ç† -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script><!-- Phase8: PDF.js -->
  <script>if(typeof pdfjsLib!=='undefined')pdfjsLib.GlobalWorkerOptions.workerSrc='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>
  <script src="drawing-viewer.js"></script><!-- v12è¿½åŠ : Phase8å›³é¢ãƒ“ãƒ¥ãƒ¼ã‚¢ -->
  <script src="auto-save.js"></script>
  
  <!-- ç”»é¢ãƒ­ãƒ¼ãƒ€ãƒ¼ï¼ˆåˆ†å‰²ã•ã‚ŒãŸç”»é¢ã‚’èª­ã¿è¾¼ã‚€ï¼‰ -->
  <script src="screen-loader.js"></script>
  
  <script src="app.js"></script>
  
  <!-- Service Workerç™»éŒ²ï¼ˆPWAå¯¾å¿œï¼‰ -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(registration => {
            console.log('Service Worker ç™»éŒ²æˆåŠŸ:', registration.scope);
          })
          .catch(error => {
            console.log('Service Worker ç™»éŒ²å¤±æ•—:', error);
          });
      });
    }
  </script>
</body>
</html>
